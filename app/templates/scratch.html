currently when startLinkTool() finishes, clickable text is being added to the quill.js editor named after the entryDiv that was selected. How do i modify the code below so instead of new clickable text being inserted, the selected text in the quill.js editor is turned in to clickable text and stores a variable in the clickable text so when ever that clickable text is clicked from that point forward, it will print the contents of that variable to the console?

CSS:
.custom-dropdown {
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  max-height: 300px; /* Adjust as needed */
  overflow-y: auto;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
  border-radius: 0px;
  padding: 6px 8px;
  margin-top: 25px;
  display: block;
}

.custom-dropdown div {
  color: black;
  padding: 6px 8px;
  font-family: 'VT323', Courier;
  text-decoration: none;
}

.custom-drop-filter {
  height: 25px;
  width: 200px;
  position: absolute;
  font-family: 'VT323', Courier;
}

.custom-drop-buttons {
  position: absolute;
  top: 80px;
  right: 210px;
}

#custom-link-button {
  transform: scale(0.65)
             translate(-8px, -14px);
}

HTML:

<div id="container">
  <div id="leftPanel">
    <button id="toggleBtn" onclick="toggleFileTreeSearch()">Search</button>
    <div id="fileTreeContainer">
      <div id="fileTree" class="root-folder"></div>
    </div>
    <div id="searchContainer">
      <input type="text" id="searchInput" placeholder="Search..." onkeyup="handleKeyUp(event)">
      <button onclick="runSearch()">Search</button>
      <ul id="searchResults" onclick="handleSearchResultClick(event)"></ul>
    </div>
  </div>

  <div id="separator"></div>

  <div id="rightPanel">
    <div id="file_buttons" class="row" style="display: none;">
        <div class="column">
            <button id="saveBtn">Save</button>
            <button onclick="showInputField('move', event)">Move File</button>
            <button id="deleteBtn" style="background-color: red;" onclick="showInputField('delete_file', event)">Delete File</button>
        </div>
    </div>
    <div id="folder_buttons" class="row" style="display: none;">
        <div class="column">
            <button onclick="showInputField('folder', event)">Add Folder</button>
            <button onclick="showInputField('file', event)">Add File</button>
            <button onclick="showInputField('move', event)">Move Folder</button>
            <button style="background-color: red;" onclick="showInputField('delete_folder', event)">Delete Folder</button>
        </div>   
    </div>
    <div id="toolbar" style="display: none;">
      <div class="row"> 
        <div class="col">
          <select class="ql-header">
            <option value="" selected></option>
            <option value="1">Header 1</option>
            <option value="2">Header 2</option>
            <option value="3">Header 3</option>
          </select>
          <button class="ql-bold"></button>
          <button class="ql-italic"></button>
          <button class="ql-underline"></button>
          <button class="ql-list" value="ordered"></button>
          <button class="ql-list" value="bullet"></button>
          <button class="ql-clean"></button>
          <button id='custom-link-button'><i class="fa fa-link"></i></button>
        </div>
        <div class="col">
          <div id='linkDropdownDiv'></div>
        </div>
      </div>     
    </div>    
    <div id="editorContainer"></div> 
  </div>
</div>

JAVASCRIPT:
<script>

let idRef = {};
let categoryName;
let entryName;
let entryID;

function startLinkTool(quillTextSelect) {
    document.getElementById("linkDropdownDiv").addEventListener('mousedown', function(e) {
      e.preventDefault();
    });

    document.getElementById("linkDropdownDiv").style.display = "block";

    let categorySearchInput = document.createElement('input');
    categorySearchInput.type = 'text';
    categorySearchInput.id = 'categorySearchInput';
    categorySearchInput.className = 'custom-drop-filter';
    categorySearchInput.placeholder = 'Category...';
    categorySearchInput.style.display = 'None';

    let linkDropdownDiv = document.querySelector('#linkDropdownDiv');
    linkDropdownDiv.appendChild(categorySearchInput);

    // Create a div for the categories
    let categoryDiv = document.createElement('div');
    categoryDiv.id = 'categoryDiv';
    categoryDiv.className = 'custom-dropdown'; 
    categoryDiv.style.display = 'none';

    // Create a search input field
    let entrySearchInput = document.createElement('input');
    entrySearchInput.type = 'text';
    entrySearchInput.id = 'entrySearchInput';
    entrySearchInput.className = 'custom-drop-filter';
    entrySearchInput.placeholder = 'Search...';
    entrySearchInput.style.display = 'none'; // Initially hidden

    // Create a left arrow icon
    let leftArrow = document.createElement('span');
    leftArrow.className = 'custom-drop-buttons';
    leftArrow.textContent = '←';
    leftArrow.style.display = 'none'; // Initially hidden

    // Append the left arrow and the search input field to your HTML
    linkDropdownDiv.appendChild(entrySearchInput);
    linkDropdownDiv.appendChild(leftArrow);
    

    // Create a div for the entries
    let entryDiv = document.createElement('div');
    entryDiv.id = 'entryDiv';
    entryDiv.className = 'custom-dropdown';
    entryDiv.style.display = 'none';


    // Append the div to your HTML
    linkDropdownDiv.appendChild(entryDiv);

    // Append the div to your HTML
    linkDropdownDiv.appendChild(categoryDiv);
    fetch('/get_categories')
      .then(response => response.json())
      .then(categories => {
        // Populate the div with the categories
        categoryDiv.innerHTML = ''; // Clear previous categories
        Object.keys(categories).forEach(categoryId => {
          let div = document.createElement('div');
          div.textContent = categories[categoryId];
          div.addEventListener('click', function() {
            categoryName = div.innerHTML;
            // Replace the dropdown with the search input field
            categorySearchInput.style.display = 'none';
            categoryDiv.style.display = 'none';
            leftArrow.style.display = '';
            entrySearchInput.style.display = '';
            entryDiv.style.display = '';
            fetch('/get_category/' + div.innerHTML)
              .then(response => response.json())
              .then(data => {
                // Populate the div with the entries
                entryDiv.innerHTML = ''; // Clear previous entries
                Object.keys(data).forEach(entryId => {
                  let div = document.createElement('div');
                  div.textContent = data[entryId];
                  idRef[data[entryId]] = entryId;
                  div.addEventListener('click', function(e) {
                    e.preventDefault();
                    entryName = div.innerHTML;
                    entryID = idRef[entryName];
                    send_selection(quillTextSelect);
                    endLinkTool();
                  });
                  entryDiv.appendChild(div);
                });
              });                
            });
            categoryDiv.appendChild(div);
          });
          
          categorySearchInput.style.display = '';
          categoryDiv.style.display = '';
        });

        // Add an event listener to the search field
        categorySearchInput.addEventListener('input', function() {
          let filter = categorySearchInput.value.toUpperCase();
          let divs = categoryDiv.getElementsByTagName('div');
          for (let i = 0; i < divs.length; i++) {
            let txtValue = divs[i].textContent;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              divs[i].style.display = '';
            } else {
              divs[i].style.display = 'none';
            }
          }
        });

        // Add an event listener to the left arrow
        leftArrow.addEventListener('click', function() {
          // Replace the search input field with the dropdown
          categorySearchInput.style.display = '';
          categoryDiv.style.display = '';
          leftArrow.style.display = 'none';
          entrySearchInput.style.display = 'none';
          entryDiv.style.display = 'none'; // Hide the div
        });

        // Add an event listener to the search field
        entrySearchInput.addEventListener('input', function() {
          let filter = entrySearchInput.value.toUpperCase();
          let divs = entryDiv.getElementsByTagName('div');
          for (let i = 0; i < divs.length; i++) {
            let txtValue = divs[i].textContent;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              divs[i].style.display = '';
            } else {
              divs[i].style.display = 'none';
            }
          }
          entryDiv.style.display = ''; // Show the div when typing
        });  
}

function endLinkTool() {
  document.getElementById("linkDropdownDiv").style.display = "none";
  document.getElementById("categorySearchInput").style.display = 'none';
  document.getElementById("categoryDiv").style.display = 'none';
  document.getElementById("entrySearchInput").style.display = 'none';
  document.getElementById("entryDiv").style.display = 'none';
  document.getElementById('linkDropdownDiv').innerHTML = "";
}

async function send_selection(quillText) {
    let dataToSend = {
      entryNameK: entryName,
      categoryNameK: categoryName,
      entryIDK: entryID
    };

    const response = await fetch('/get_summary', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(dataToSend)
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    console.log(data);

    // Get the current selection
    let range = quillText.getSelection(true);
    
    // Get the selected text
    let selectedText = quillText.getText(range.index, range.length);
    
    // Insert the clickable text
    quillText.deleteText(range.index, range.length); // Delete the selected text
    quillText.insertText(range.index, selectedText, { 'link': '#' }); // Insert the selected text as a link
    
    // Add a custom event listener to the inserted link
    let links = document.querySelectorAll('.ql-editor a');
    for (let i = 0; i < links.length; i++) {
      links[i].addEventListener('click', function(e) {
        e.preventDefault();
        // Custom behavior goes here
        console.log(data); // Print the contents of the variable to the console
      });
    }
}

function displayTextInRightPanel(content, file_id) {
  const editorContainer = document.getElementById('editorContainer');
  editorContainer.innerHTML = '<div id="right_stuff"><div id="editor"></div></div>';
  var icons = Quill.import('ui/icons');

  icons['ql-header ql-picker'] = '<svg viewBox="3 3 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon></svg>';
  icons['bold'] = '<svg viewBox="3 3 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"></path><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"></path></svg>';
  icons['italic'] = '<svg viewBox="3 3 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line></svg>';
  icons['underline'] = '<svg viewBox="2 2 15 15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"></path><rect class="ql-fill" height="0.3" rx="0.5" ry="0.5" width="12" x="3" y="15.5"></rect></svg>';
  icons['link'] = '<svg class="my-custom-icon" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><circle cx="100" cy="100" r="100"/></svg>';
  icons['list']['ordered'] = '<svg viewBox="0 1 10 10" fill="none" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"></line><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"></line><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"></line><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"></line><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"></path><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"></path><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"></path></svg>';
  icons['list']['bullet'] = '<svg viewBox="0 6 10 10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"></line><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"></line><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"></line><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"></line><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"></line><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"></line></svg>';
  icons['clean'] = '<svg viewBox="1.4 1.4 15 15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"></line><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"></line><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"></line><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"></line><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"></rect></svg>';

  var quill = new Quill('#editor', {
    modules: {
      toolbar: '#toolbar'
    },
    theme: 'snow'
  });


  let quillContent = document.querySelector('.ql-editor');
  quillContent.style.backgroundColor = '#383838';
  quillContent.style.color = '#00dd00';
  quillContent.style.borderColor = '#ffffff';
  quillContent.style.fontSize = '2em';

  let pickerElement = document.querySelector('.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg'); 
  pickerElement.style.position = 'absolute';
  pickerElement.style.marginTop = '-10.5px';
  pickerElement.style.right = '85px';
  pickerElement.style.top = '36%';
  pickerElement.style.width = '30px';

  quill.clipboard.dangerouslyPasteHTML(content);
  
  const saveBtn = document.getElementById('saveBtn');

  saveBtn.addEventListener('click', function() {
    const editorContent = quill.root.innerHTML;

    fetch('/save_content', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ 
        content: editorContent,
        f_id: file_id
      })
    });
  });

  document.querySelector('#custom-link-button').addEventListener('click', function() {
    let range = quill.getSelection();
    if (range && range.length != 0) {
      if (document.getElementById("linkDropdownDiv").style.display === "none") {
        startLinkTool(quill);
      } else {
        endLinkTool();
      };
    }
  });

  quill.on('text-change', function(delta, oldDelta, source) {
    if (source == 'user') {
      let ops = delta.ops;
      ops.forEach(op => {
        if (op.insert && op.insert.link) {
          fetch(op.insert.link)
            .then(response => response.json())
            .then(data => alert(JSON.stringify(data)));
        }
      });
    }
  });  

  quill.on('selection-change', function(range, oldRange, source) {
    if (range == null && source == 'user') {
      endLinkTool();
    }
  });
}