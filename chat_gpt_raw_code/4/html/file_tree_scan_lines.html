<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous">
  <link 
    rel="stylesheet" 
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <style>
    @import url(https://fonts.googleapis.com/css?family=VT323);



    @keyframes scroll {
        0% { height: 0 }
        100% { height: 100%; }
    }

    @keyframes type { 
    from { width: 0; } 
    } 

    @keyframes type2 {
    0%{width: 0;}
    50%{width: 0;}
    100%{ width: 100; } 
    } 

    /* @keyframes blink {
    to{opacity: .0;}
    } */

    @keyframes scan {
        from { top: 0 }
        to { top: 100% }
    }

    @keyframes flicker {
            0% { opacity: 19.15795 }
            5% { opacity: 19.31511 }
            10% { opacity: 19.94554 }
            15% { opacity: 19.2469 }
            20% { opacity: 19.62031 }
            25% { opacity: 19.0293 }
            30% { opacity: 19.00899 }
            35% { opacity: 19.5344 }
            40% { opacity: 19.12778 }
            45% { opacity: 19.52042 }
            50% { opacity: 19.3823 }
            55% { opacity: 19.2198 }
            60% { opacity: 19.9383 }
            65% { opacity: 19.86615 }
            70% { opacity: 19.68695 }
            75% { opacity: 19.55749 }
            80% { opacity: 19.96984 }
            85% { opacity: 19.0361 }
            90% { opacity: 19.24467 }
            95% { opacity: 19.08351 }
            100% { opacity: 19.54813 }
        }

    ::-webkit-scrollbar {
    display: none;
    }

    * {
        box-sizing: border-box;
        }
        
    html,
    body {
        background: #383838;
        color: #00dd00;
        font-size: 64.5%;
        font-size: 1.4em;
        font-family: 'VT323', Courier;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .navbar-expand-lg {
        background-color: #ffffff;
    }

    h1, h2, h3 h4, h5, h6 { 
        font-weight: normal;
        margin: 0;
        text-transform: uppercase;
    }
    h4 b {
    color: white;
    }
    a {
        color: white; 
        text-decoration: none;  
    }

    a:hover {
        color: red;
    }

    p { 
        line-height: 100%;
        margin: 0; 
    }
        
    span { animation: blink 1s infinite }

    ul {
        list-style: none;
    }

    ul a:before,
    p a:before {
        color: #00dd00;
        content: ' [ ';
    }

    ul a:after,
    p a:after {
        color: #00dd00;
        content: ' ] '; 
    }

    header.site {
        margin: 0 0 40px 0;
        text-transform: uppercase;
    }

    nav.site { 
        margin: 0 0 40px 0;
    position: relative;
    width: 100%;
    z-index: 10;
    }

    nav.site ul {
        padding: 0;
    }

    nav.site ul li {
        display: inline-block;
    padding: 0 10px;
    min-width: 250px;
    width: auto;
    }

    .overlay {
        height: 1px;
        position: absolute;
        top: 0;
        left: 0;
        width: 1px;
    }

    .overlay:before {
        background: linear-gradient(#101010 50%, rgba(16, 16, 16, 0.2) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.03));
        background-size: 100% 3px, 6px 100%;
        content: "";
        display: block;
        pointer-events: none;
        position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        z-index: 2;
    }
        
    .overlay:after {
        animation: flicker 0.30s infinite;
        background: rgba(16, 16, 16, 0.2);
        content: "";
        display: block;
        pointer-events: none;
        position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        z-index: 2;
    }

    .col {
        float: left;
        padding: 0 20px;
    }

    .col.two { width: auto; }

    .wrapper {
    animation: scroll 5s 1;
    margin: 0;
    overflow: hidden;
    padding: 0;
        scrollbar-width: none;
    -ms-overflow-style: none;
    }

    .content { 
        animation: scroll 3s 1;
    overflow: hidden;
        padding: 40px; 
        position: relative;
        width: 95%;
    }

    #logo-v {
        display: block;
        height: auto;
        margin: 0 auto;
        width: 200px;
    }

    img.pip-hero {
        display: block;
        float: left;
        height: auto;
        margin: 5px 10px 5px 0;
        width: 120px;
    }

    /* form {} */

    label {
        clear: left;
        display: block;
        float: left;
        margin-right: 10px;
        padding-top: 5px;
    }

    /* input[type=text],
    textarea {
        background: transparent;
        border: none;
        color: #00dd00;
        display: block;
        float: left;
        font-family: 'VT323', Courier;
        font-size: 1.2em;
        position: relative;
        width: 80%;
        z-index: 10
    } */

    textarea {
        margin-bottom: 20px;
        overflow: auto;
        resize: none;
    }

    input[type=text]:focus,
    textarea:focus,
    input[type=submit]:focus,
    a.button:focus {
        outline: 0;
    }

    input[type=submit],
    a.button {
        background: transparent;
        border: 1px solid #00dd00;
        clear: both;
        color: #00dd00;
        cursor: hand;
        display: inline-block;
        font-family: 'VT323', Courier;
        font-size: 1em;
        margin-bottom: 20px;
        opacity: 0.25;
        padding: 10px 100px;
        position: relative;
        text-decoration: none;
        text-transform: uppercase;
        z-index: 10;
    }

    input[type=submit]:hover,
    a.button:hover {
        background: #00dd00;
        color: #383838;
        opacity: 0.8;
    }

    input[type=button],
    a.button {
        background: transparent;
        border: 1px solid #00dd00;
        clear: both;
        color: #00dd00;
        cursor: hand;
        display: inline-block;
        font-family: 'VT323', Courier;
        font-size: 1em;
        margin: 20px;
        opacity: 0.25;
        padding: 10px 20px;
        position: relative;
        text-decoration: none;
        text-transform: uppercase;
        z-index: 10;
    }

    input[type=button]:hover,
    a.button:hover {
        background: #00dd00;
        color: #383838;
        opacity: 0.8;
    }

    .expandingArea { position: relative }
        
    /* .scanline {
        animation: scroll 10s 5s infinite;
        background: -moz-linear-gradient(top,  rgba(0,221,0,0) 0%, rgba(0,221,0,1) 50%, rgba(0,221,0,0) 100%);
        background: -webkit-linear-gradient(top,  rgba(0,221,0,0) 0%,rgba(0,221,0,1) 50%,rgba(0,221,0,0) 100%);
        background: linear-gradient(to bottom,  rgba(0,221,0,0) 0%,rgba(0,221,0,1) 50%,rgba(0,221,0,0) 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0000dd00', endColorstr='#0000dd00',GradientType=0 );
        display: block;
        height: 20px;
        opacity: 0.05;
        position: absolute;
            left: 0;
            right: 0;
            top: -5%;
        z-index: 2;
    } */

    .clear {
        clear: both;
    }

    .clearfix {
    overflow: auto;
    zoom: 1;
    }

    .upper { text-transform: uppercase; }


    #container {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    #leftPanel {
      overflow-y: auto;
      border-right: 1px solid #ccc;
      white-space: nowrap; /* Prevent word wrapping in the left panel */
    }

    #rightPanel {
      overflow-y: auto;
      padding: 10px;
    }

    #separator {
      cursor: ew-resize;
      background-color: #ddd;
      width: 10px;
      height: 100%;
      position: relative;
      flex-shrink: 0;
    }

    ul {
      list-style-type: none;
      padding-left: 20px;
    }

    .folder {
      cursor: pointer;
      position: relative;
    }

    .folder::before {
      content: '\25B6'; /* Unicode character for a right arrow */
      position: absolute;
      left: -20px;
    }

    .file {
      cursor: pointer;
      padding-left: 20px;
    }

    /* Rotate the arrow when the folder is open */
    .folder.open::before {
      transform: rotate(90deg);
    }

    /* Remove bullet points for the root folder */
    .root-folder {
      list-style-type: none;
    }

    #searchContainer {
      display: none;
      margin-top: 10px;
    }

    #searchResults {
      list-style-type: none;
      padding: 0;
    }

    #searchResults li {
      cursor: pointer;
      padding: 5px;
      border: 1px solid #ccc;
      margin-bottom: 5px;
    }

    #toggleBtn {
      cursor: pointer;
      margin-bottom: 10px;
    }
  </style>
  <title>Resizable Interface</title>
</head>
<body>
  <div class="overlay"></div>
  <div class="scanline"></div>
  <div class="wrapper">
    <div class="content clearfix">
      <div id="container">
        <div id="leftPanel">
          <button id="toggleBtn" onclick="toggleFileTreeSearch()">Search</button>
          <div id="fileTreeContainer">
            <div id="fileTree" class="root-folder"></div>
          </div>
          <div id="searchContainer">
            <input type="text" id="searchInput" placeholder="Search...">
            <button onclick="runSearch()">Search</button>
            <ul id="searchResults" onclick="handleSearchResultClick(event)"></ul>
          </div>
        </div>

        <div id="separator"></div>

        <div id="rightPanel">
          <!-- Content for the right panel goes here -->
        </div>
      </div>
    </div>
  </div>
  <script>
    const fileTreeData = {
      name: 'Root',
      type: 'folder',
      children: [
        {
          name: 'Folder 1',
          type: 'folder',
          children: [
            { name: 'File 1.1', type: 'file', text: 'File 1.1 text' },
            { name: 'File 1.2', type: 'file', text: 'File 1.2 text' },
            {
              name: 'Subfolder 1.3',
              type: 'folder',
              children: [
                { name: 'File 1.3.1', type: 'file', text: 'File 1.3.1 text' },
                { name: 'File 1.3.2', type: 'file', text: 'File 1.3.2 text' },
              ]
            }
          ]
        },
        {
          name: 'Folder 2',
          type: 'folder',
          children: [
            { name: 'File 2.1', type: 'file', text: 'File 2.1 text' },
            { name: 'File 2.2', type: 'file', text: 'File 2.2 text' },
          ]
        },
        { name: 'File 3', type: 'file', text: 'File 3 text' },
      ]
    };

    function createFileTree(node, parentElement, isFirstLayer = true) {
      const listItem = document.createElement('li');
      listItem.innerHTML = `<div class="${node.type === 'folder' ? 'folder' : 'file'}" data-name="${node.name}">${node.name}</div>`;

      if (node.children) {
        const childList = document.createElement('ul');
        if (!isFirstLayer) {
          childList.style.display = 'none';
        }
        node.children.forEach(childNode => createFileTree(childNode, childList, false));
        listItem.appendChild(childList);

        if (node.type === 'folder') {
          const folderElement = listItem.querySelector('.folder');
          folderElement.addEventListener('click', () => {
            childList.style.display = childList.style.display === 'none' ? 'block' : 'none';
            folderElement.classList.toggle('open');
          });

          // Open the folder if it's in the first layer
          if (isFirstLayer) {
            childList.style.display = 'block';
            folderElement.classList.add('open');
          }
        }
      }

      parentElement.appendChild(listItem);
    }

    const fileTreeElement = document.getElementById('fileTree');
    createFileTree(fileTreeData, fileTreeElement);

    function toggleFileTreeSearch() {
      const fileTreeContainer = document.getElementById('fileTreeContainer');
      const searchContainer = document.getElementById('searchContainer');
      const toggleBtn = document.getElementById('toggleBtn');

      if (fileTreeContainer.style.display !== 'none') {
        fileTreeContainer.style.display = 'none';
        searchContainer.style.display = 'block';
        toggleBtn.textContent = 'File Tree';
      } else {
        fileTreeContainer.style.display = 'block';
        searchContainer.style.display = 'none';
        toggleBtn.textContent = 'Search';
      }
    }

    function runSearch() {
      const searchInput = document.getElementById('searchInput').value.toLowerCase();
      const searchResults = document.getElementById('searchResults');
      searchResults.innerHTML = '';

      if (searchInput.length === 0) {
        return;
      }

      // Function to perform a case-insensitive search
      function searchInTree(node, path) {
        const matches = [];
        const nodeName = node.name.toLowerCase();

        if (nodeName.includes(searchInput)) {
          matches.push({ path, confidence: 5 });
        }

        if (node.children) {
          node.children.forEach((child, index) => {
            const childPath = path ? `${path} > ${child.name}` : child.name;
            matches.push(...searchInTree(child, childPath));
          });
        }

        return matches;
      }

      const searchResultsData = searchInTree(fileTreeData, '');
      const sortedResults = searchResultsData.sort((a, b) => b.confidence - a.confidence);

      sortedResults.slice(0, 5).forEach(result => {
        const listItem = document.createElement('li');
        listItem.textContent = result.path;
        listItem.addEventListener('click', () => handleSearchResultClick(result.path));
        searchResults.appendChild(listItem);
      });
    }

    function handleSearchResultClick(path) {
      const fileTreeContainer = document.getElementById('fileTreeContainer');
      const searchContainer = document.getElementById('searchContainer');
      const toggleBtn = document.getElementById('toggleBtn');

      const pathArray = path.split(' > ');
      const lastNodeName = pathArray.pop(); // Remove the last item from the array
      let currentNode = fileTreeData;
      let currentElement = fileTreeElement;

      // Open parent folders on the way
      pathArray.forEach(name => {
        const child = currentNode.children.find(node => node.name === name);
        if (child) {
          currentNode = child;
          const element = currentElement.querySelector(`[data-name="${currentNode.name}"]`);
          if (element) {
            // Open the parent folder
            if (currentNode.type === 'folder' && !element.classList.contains('open')) {
              element.classList.add('open');
              element.nextElementSibling.style.display = 'block';
            }
            // Update current element to the child's container
            currentElement = element.nextElementSibling;
          }
        }
      });

      // Highlight the last node (file) in the file tree
      const lastElement = currentElement.querySelector(`[data-name="${lastNodeName}"]`);
      if (lastElement) {
        lastElement.classList.add('highlight');
      }

      // Scroll to the element corresponding to the path
      const element = currentElement.querySelector(`[data-name="${lastNodeName}"]`);
      if (element) {
        const container = fileTreeContainer.querySelector('ul');
        container.scrollTop = element.offsetTop - container.offsetTop;
      }

      // Hide search container and display file tree container
      fileTreeContainer.style.display = 'block';
      searchContainer.style.display = 'none';
      toggleBtn.textContent = 'Search';
    }

    fileTreeElement.addEventListener('click', (event) => {
      const target = event.target;
      const fileTypeElement = target.closest('.file');

      if (fileTypeElement) {
        const fileName = fileTypeElement.getAttribute('data-name');
        const fileData = findFileData(fileTreeData, fileName);

        if (fileData && fileData.text) {
          displayTextInRightPanel(fileData.text);
        }
      }
    });

    function findFileData(node, fileName) {
      if (node.name === fileName && node.type === 'file') {
        return node;
      }

      if (node.children) {
        for (const child of node.children) {
          const result = findFileData(child, fileName);
          if (result) {
            return result;
          }
        }
      }

      return null;
    }

    function displayTextInRightPanel(text) {
      const rightPanel = document.getElementById('rightPanel');
      rightPanel.textContent = text;
    }

    // Add code for handling separator dragging
    const separator = document.getElementById('separator');
    const leftPanel = document.getElementById('leftPanel');
    const rightPanel = document.getElementById('rightPanel');
    let isResizing = false;

    separator.addEventListener('mousedown', (event) => {
      isResizing = true;
      document.body.style.userSelect = 'none'; // Disable text selection
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', () => {
        isResizing = false;
        document.body.style.userSelect = ''; // Enable text selection
        document.removeEventListener('mousemove', handleMouseMove);
      });
    });

    function handleMouseMove(event) {
      if (isResizing) {
        const containerRect = document.getElementById('container').getBoundingClientRect();
        const separatorRect = separator.getBoundingClientRect();
        const mouseX = event.clientX - containerRect.left;

        // Ensure the separator stays within the container bounds
        const newWidth = Math.min(Math.max(mouseX, 0), containerRect.width);

        leftPanel.style.width = newWidth + 'px';
        rightPanel.style.width = (containerRect.width - newWidth - separatorRect.width) + 'px';
      }
    }
  </script>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous">
      </script>
      <script>
        $(document).ready(function () {
            $("#title").focus();
            $("#text").autosize();
        });
      </script>
</body>
</html>
